<div class="beer-container">
  <!-- Back button -->
  <div class="back-button">
    <%= link_to :back do %>
      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        viewBox="0 0 492 492" width="20px" fill="#fcfcfc" style="enable-background:new 0 0 492 492;" xml:space="preserve">
        <path d="M198.608,246.104L382.664,62.04c5.068-5.056,7.856-11.816,7.856-19.024c0-7.212-2.788-13.968-7.856-19.032l-16.128-16.12
          C361.476,2.792,354.712,0,347.504,0s-13.964,2.792-19.028,7.864L109.328,227.008c-5.084,5.08-7.868,11.868-7.848,19.084
          c-0.02,7.248,2.76,14.028,7.848,19.112l218.944,218.932c5.064,5.072,11.82,7.864,19.032,7.864c7.208,0,13.964-2.792,19.032-7.864
          l16.124-16.12c10.492-10.492,10.492-27.572,0-38.06L198.608,246.104z"/>
      </svg>
    <% end %>
  </div>
  <!-- Beer image -->
  <div class="list-unstyled beer-info-top">
    <% if @beer.photo_url %>
      <%= image_tag @beer.photo_url %>
    <% else %>
      <%= image_tag "https://w7.pngwing.com/pngs/266/759/png-transparent-gray-can-illustration-beer-aluminum-can-beer-packaging-design-glass-beer-bottle-preview.png", class: "img-fluid" %>
    <% end %>
  <!-- Add and check icons -->
    <div class = "check-plus-buttons">
      <% @to_drink = UsersBeer.find_by(beer: @beer, user: current_user, drank: :false) %>
      <% @drank = UsersBeer.find_by(beer: @beer, user: current_user, drank: :true) %>
      <% if @to_drink %>
      <%= link_to unlist_beer_path, method: :delete do %>
        <div class="plus-button-gray">
          <svg viewBox="0 0 426.66667 426.66667" width="20px" fill="#666666" xmlns="http://www.w3.org/2000/svg"><path d="m405.332031 192h-170.664062v-170.667969c0-11.773437-9.558594-21.332031-21.335938-21.332031-11.773437 0-21.332031 9.558594-21.332031 21.332031v170.667969h-170.667969c-11.773437 0-21.332031 9.558594-21.332031 21.332031 0 11.777344 9.558594 21.335938 21.332031 21.335938h170.667969v170.664062c0 11.777344 9.558594 21.335938 21.332031 21.335938 11.777344 0 21.335938-9.558594 21.335938-21.335938v-170.664062h170.664062c11.777344 0 21.335938-9.558594 21.335938-21.335938 0-11.773437-9.558594-21.332031-21.335938-21.332031zm0 0"/></svg>
        </div>
        <% end %>
        <%= link_to drank_beer_path, method: :post do %>
        <div class="check-button">
          <svg viewBox="0 -65 434.67733 434" width="20px" fill="#fcfcfc" xmlns="http://www.w3.org/2000/svg"><path d="m152.003906 304.34375c-5.460937 0-10.921875-2.089844-15.082031-6.25l-130.664063-130.667969c-8.34375-8.339843-8.34375-21.824219 0-30.164062 8.339844-8.339844 21.820313-8.339844 30.164063 0l115.582031 115.582031 246.253906-246.25c8.339844-8.339844 21.820313-8.339844 30.164063 0 8.339844 8.34375 8.339844 21.824219 0 30.167969l-261.332031 261.332031c-4.160156 4.160156-9.625 6.25-15.085938 6.25zm0 0"/></svg>
        </div>
        <% end %>
      <% elsif @drank %>
        <%= link_to to_drink_beer_path, method: :post do %>
        <div class="plus-button">
          <svg viewBox="0 0 426.66667 426.66667" width="20px" fill="#fcfcfc" xmlns="http://www.w3.org/2000/svg"><path d="m405.332031 192h-170.664062v-170.667969c0-11.773437-9.558594-21.332031-21.335938-21.332031-11.773437 0-21.332031 9.558594-21.332031 21.332031v170.667969h-170.667969c-11.773437 0-21.332031 9.558594-21.332031 21.332031 0 11.777344 9.558594 21.335938 21.332031 21.335938h170.667969v170.664062c0 11.777344 9.558594 21.335938 21.332031 21.335938 11.777344 0 21.335938-9.558594 21.335938-21.335938v-170.664062h170.664062c11.777344 0 21.335938-9.558594 21.335938-21.335938 0-11.773437-9.558594-21.332031-21.335938-21.332031zm0 0"/></svg>
        </div>
        <% end %>
        <%= link_to unlist_beer_path, method: :delete do %>
        <div class="check-button-gray">
          <svg viewBox="0 -65 434.67733 434" width="20px" fill="#666666" xmlns="http://www.w3.org/2000/svg"><path d="m152.003906 304.34375c-5.460937 0-10.921875-2.089844-15.082031-6.25l-130.664063-130.667969c-8.34375-8.339843-8.34375-21.824219 0-30.164062 8.339844-8.339844 21.820313-8.339844 30.164063 0l115.582031 115.582031 246.253906-246.25c8.339844-8.339844 21.820313-8.339844 30.164063 0 8.339844 8.34375 8.339844 21.824219 0 30.167969l-261.332031 261.332031c-4.160156 4.160156-9.625 6.25-15.085938 6.25zm0 0"/></svg>
        </div>
        <% end %>
      <% else %>
        <%= link_to to_drink_beer_path, method: :post do %>
        <div class="plus-button">
          <svg viewBox="0 0 426.66667 426.66667" width="20px" fill="#fcfcfc" xmlns="http://www.w3.org/2000/svg"><path d="m405.332031 192h-170.664062v-170.667969c0-11.773437-9.558594-21.332031-21.335938-21.332031-11.773437 0-21.332031 9.558594-21.332031 21.332031v170.667969h-170.667969c-11.773437 0-21.332031 9.558594-21.332031 21.332031 0 11.777344 9.558594 21.335938 21.332031 21.335938h170.667969v170.664062c0 11.777344 9.558594 21.335938 21.332031 21.335938 11.777344 0 21.335938-9.558594 21.335938-21.335938v-170.664062h170.664062c11.777344 0 21.335938-9.558594 21.335938-21.335938 0-11.773437-9.558594-21.332031-21.335938-21.332031zm0 0"/></svg>
        </div>
        <% end %>
        <%= link_to drank_beer_path, method: :post do %>
        <div class="check-button">
          <svg viewBox="0 -65 434.67733 434" width="20px" fill="#fcfcfc" xmlns="http://www.w3.org/2000/svg"><path d="m152.003906 304.34375c-5.460937 0-10.921875-2.089844-15.082031-6.25l-130.664063-130.667969c-8.34375-8.339843-8.34375-21.824219 0-30.164062 8.339844-8.339844 21.820313-8.339844 30.164063 0l115.582031 115.582031 246.253906-246.25c8.339844-8.339844 21.820313-8.339844 30.164063 0 8.339844 8.34375 8.339844 21.824219 0 30.167969l-261.332031 261.332031c-4.160156 4.160156-9.625 6.25-15.085938 6.25zm0 0"/></svg>
        </div>
        <% end %>
      <% end %>
    </div>
  </div>

  <!-- Beer details -->
  <div class="container">
    <div class="container-fluid beer">
     <div class="beer-name-stars">
        <h1 class="beer-name"><%= @beer.name %></h1>
        <% if current_user.reviews.where(beer_id: @beer) == [] %>
          <!-- button to open modal-->
          <button type="button" class="btn btn-sm rev" data-toggle="modal" data-target="#modal">
            <% 5.times do %>
              <i class="fas fa-star gray"></i>
            <% end %>
          </button>
        <% else %>
         <button type="button" class="btn btn-sm rev" data-toggle="modal" data-target="#modal">
          <p class="beer-stars">
            <% current_user.reviews.where(beer_id: @beer).last.rating.times do %>
              <i class="fas fa-star"></i>
            <% end %>
            <% (5 - current_user.reviews.where(beer_id: @beer).last.rating).times do %>
              <i class="far fa-star"></i>
            <% end %>
          </p>
          </button>

        <% end %>
      </div>
      <div class="category-brewery">
        <p class="beer-category"><%= @beer.category %></p>
  <!--  <p class="beer-brewery">Musa</p> -->
      </div>
      <p class="beer-description"><%= @beer.description %></p>
    </div>
  </div>
  <div class="beer-infos">
    <p><%= @beer.alcohol %>%</p>
    <p><%= @beer.ibu %> IBU</p>
    <p><%= @beer.avg_rating %></p>
  </div>
</div>
<div class="container">
  <div class="container-fluid">
    <div class="beer-menu">
      <button class="button beer-menu"> <%= link_to "check which bars sell this beer", bar_list_beer_path(@beer) %> </button>
    </div>
  </div>
</div>
<!-- Line -->
<div class="beer-show-line"></div>

<!-- Reviews -->
<div class="container">
  <div class="container-fluid">
    <div class="beer-reviews">
      <p>Reviews:</p>
      <ul class="list-group">
        <% @beer.reviews.order('updated_at DESC').each do |review| %>
          <div class="review-show-line"></div>
          <div class="list-group-item-review">
            <div class="list-group-item-review-content">
              <p><%= review.user.first_name %></p>
              <% review.rating.times do %>
                <i class="fas fa-star"></i>
                <% end %>
                <% (5 - review.rating).times do %>
                <i class="far fa-star"></i>
              <% end %>
            </div>
            <p><%= review.content %></p>
          </div>
        <% end %>
      </ul>
    </div>
  </div>
</div>

<!-- Review Modal -->
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <%= simple_form_for [ @beer, @review ] do |f| %>
          <div class="rate-title">Rate it:</div>
          <div class="rate">
            <input type="radio" id="star5" name="review[rating]" value="5" <%= @review.rating == 5 ? "checked" : "" %> />
            <label for="star5" title="text">5 stars</label>
            <input type="radio" id="star4" name="review[rating]" value="4" <%= @review.rating == 4 ? "checked" : "" %>/>
            <label for="star4" title="text">4 stars</label>
            <input type="radio" id="star3" name="review[rating]" value="3" <%= @review.rating == 3 ? "checked" : "" %>/>
            <label for="star3" title="text">3 stars</label>
            <input type="radio" id="star2" name="review[rating]" value="2" <%= @review.rating == 2 ? "checked" : "" %>/>
            <label for="star2" title="text">2 stars</label>
            <input type="radio" id="star1" name="review[rating]" value="1" <%= @review.rating == 1 ? "checked" : "" %> />
            <label for="star1" title="text">1 star</label>
          </div>
        </div>
        <div class="review-title-container">
          <label for="review-title">Leave a review:</label>
            <%= f.input :content, label: false, placeholder: 'Your opinion here' %>
            <%= f.submit "Submit review", class: "btn btn-primary review" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- End of Review Modal -->
